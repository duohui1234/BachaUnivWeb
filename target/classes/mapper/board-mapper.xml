<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.worldfriends.bacha.dao.BoardDao">
   <!-- SQL문과 태그를 매핑 -->
   
   <select id="getCount" resultType="int"><![CDATA[
      select count(*) as total from boards
   ]]></select>


   <!-- Student객체에 알아서 넣어주는데, CamelCase=true이므로 setcell_phone이 아니라 setCellPhone을 호출한다. -->
   <select id="selectList" resultType="Board" parameterType="Pagination"><![CDATA[
      select board_id, title, writer, read_cnt, reg_date from(
       select row_number() over (order by reg_date desc) as seq, 
       board_id, title, writer, read_cnt, reg_date
       from boards) where seq between #{start} and #{end} 
      ]]></select>

   <select id="selectOne" resultType="Board" parameterType="int"><![CDATA[
      select * from boards
      where board_id = #{boardId}
   ]]></select>

   <!-- CamelCase=true이므로 getcell_phone이 아니라 getCellPhone을 호출한다. -->
   <insert id="insert" parameterType="Board" useGenereateKeys="true" keyColumn="board_id" keyProperty="boardId"><![CDATA[
      insert into boards
      (board_id, title, content, writer, read_cnt, reg_date, update_date)
      values(boards_seq.nextval , #{title}, #{content}, #{writer}, 0 , sysdate, sysdate)
   ]]></insert>

   <update id="update" parameterType="Board"><![CDATA[
      update boards set
      title=#{title},
      content=#{content},
      update_date = sysdate
      where board_id=#{boardId}
   ]]></update>
   

   <delete id="delete" parameterType="int"><![CDATA[
      delete from boards
      where board_id=#{boardId}
   ]]></delete>
   
   
   <update id="increaseReadCnt" parameterType="int"><![CDATA[
     update boards set
     read_cnt = read_cnt + 1
     where board_id = #{boardId}
   ]]></update>

</mapper>   